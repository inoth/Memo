<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<!-- 映射文件，映射到对应的SQL接口 -->
<mapper namespace="inoth.dbdemo.afflatus.DAO.IPersonaDao">

  <!--返回的结果集，用于关联实体类属性和数据库字段 -->
  <!--如果实体类属性和数据库属性名保持一致，就不需要javaType和jdbcType（必须大写）属性 -->
  <resultMap id="persona" type="Persona">
    <result column="ID" property="id" javaType="java.lang.Long" jdbcType="NUMERIC"/>
    <result column="NAME" property="name" javaType="java.lang.String" jdbcType="VARCHAR"/>
    <result column="EMAIL" property="email" javaType="java.lang.String" jdbcType="VARCHAR"/>
  </resultMap>

  <!-- 查询数据 -->
  <!-- 入参定义：在接口定义中使用@Param注解(单参/多参都可使用) -->
  <!-- 语句末尾不能有分号：ORA-00911: invalid character -->
  <select id="QueryByID" resultMap="persona">
    select t.* from Persona t
    where t.ID = #{id}
    order by t.ID
  </select>

  <select id="QueryAll" resultMap="persona">
    select t.* from persona t
  </select>

  <select id="QueryByName" resultMap="persona">
    select t.* from persona t
    where t.name = #{name}
    order by t.id
  </select>

  <select id="CallProcedures"  parameterMap="getInfoMap" statementType="CALLABLE">
    {call Call_Procedures_test(?,?,?)}
  </select>
  <parameterMap id="getInfoMap" type="java.util.Map">
    <parameter property="v_id" mode="IN" jdbcType="VARCHAR"/>
    <parameter property="v_out_msg" mode="OUT" jdbcType="VARCHAR"/>
    <parameter property="v_out_cursor" mode="OUT" jdbcType="CURSOR" resultMap="persona"/>
  </parameterMap>
  <resultMap id="mapCursor" type="Map"/>
</mapper>